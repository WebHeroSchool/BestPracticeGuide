# JavaScript Best Practice Guide
---
##### *Здесь собранно 10 лучших практик по стилю кода JavaScript*
---
##### [1. Глобальные переменные](#1)
##### [2. Операций сравнения](#2)
##### [3. Eval](#3)
##### [4. Размещение скрипта](#4)
##### [5. Переменные для `for`](#5)
##### [6. Комментарии](#6)
##### [7. Строка в «SetInterval» или «SetTimeOut»](#7)
##### [8. Создания объектов](#8)
##### [9. Список переменных](#9)
##### [10. Точка с запятой](#10)


### <a name="1">Избегайте глобальных переменных</a>
---
Глобальных переменных стоит избегать по нескольким причинам.

- Во-первых, их легко переписать в различных местах кода, потому что они везде доступны.
- Во-вторых, они могут переписывать объект `window`, так как являются свойствами объекта `window`.

Две эти проблемы затрудняют восприятие кода. Следовательно, стоит определять локальные переменные настолько часто, насколько это возможно, используя ключевые слова `let` или `const`.

Переменные, определенные с let, доступны только после того, как определены, то есть, если мы напишем:

``` js
const log = () => {
  console.log(x);
}
log();
let x = 1;
log();
```

Мы получим ошибку:

``` js
Uncaught ReferenceError: Cannot access ‘x’ before initialization;
```

С ключевым словом const мы определяем постоянные, значения которым присваиваются раз и навсегда. Они также доступны только после определения. Напишем:

``` js
const log = () => {
  console.log(x);
}
const x = 1;
log();
```
Вызов `log` до `const x = 1` выдаст:

``` js
Uncaught ReferenceError: Cannot access ‘x’ before initialization
```

### <a name="2">Используйте === вместо ==</a>
---
В JavaScript существует два разных типа операций сравнения: === / !== и == / !=.

Считается хорошим тоном всегда использовать первую пару для сравнения.

::: warning
*“Если два операнда одного типа и значения, то === вернет true, а !== false”
JavaScript: The Good Parts*
:::

### <a name="3">`Eval` = зло</a>
Для тех кто не знаком, функция «eval» дает нам доступ к компилятору JavaScript. Т.е. мы можем выполнить команду записанную в строковой переменной, которую передадим в качестве параметра в eval.

Это не только замедлит вашу программу, но еще и предполагает возниковение огромной дыры безопасности вашего приложения. Это плохо. По возможности избегайте этого.

### <a name="4">Переместите скрипты вниз страницы</a>
---
Основная цель этого совета — заставить страницу грузиться как можно быстрее. Когда браузер грузит скрипт он не продолжит рендеринг пока весь файл не будет загружен. 
Таким образом пользователю придется ждать дольше.


Если ваши JS скрипты служат для добавления функционала — например, обработки кликов кнопки, то вам стоит перенести скрипты вниз поставив их перед закрывающимся тегом body.

``` html
<p>And now you know my favorite kinds of corn. </p>  
<script type="text/javascript" src="path/to/file.js"></script>  
<script type="text/javascript" src="path/to/anotherFile.js"></script>  
</body>  
</html>
```

### <a name="5">Объявляйте переменные для `for` вне циклов</a>
---
Когда выполняете долгий цикл «for» не заставляйте делать движок больше работы чем нужно.

>#### Bad
>``` js
>for(let i = 0; i < someArray.length; i++) {  
>   var container = document.getElementById('container');  
>   container.innerHtml += 'my number: ' + i;  
>   console.log(i);  
>} 
>```
Обратите внимание как мы должны высчитываем длину массива для каждой итерации и как мы обходим дерево для поиска #container.

>#### Good
>``` js
>var container = document.getElementById('container');  
>for(let i = 0, len = someArray.length; i < len;  i++) {  
>   container.innerHtml += 'my number: ' + i;  
>   console.log(i);  
>} 
>```
### <a name="6">Комментируйте ваш код</a>
---
Это кажется излишним в начале, но поверьте мне вы действительно ХОТИТЕ комментировать ваш код как можно лучше.
Что случится когда вы вернетесь к проекту через несколько месяцев что-бы обнаружить что не помните что этот кусок кода делаете. 

Или что будет если ваш коллега будет смотреть ваш код в процессе код-ревью? 

Всегда, повторяю всегда комментируйте важные части кода.

``` js
// Cycle through array and echo out each name.   
for(let i = 0, len = array.length; i < len; i++) {  
   console.log(array[i]);  
}  
```

### <a name="7">Не передавайте строку в «SetInterval» или «SetTimeOut»</a>
---
Рассмотрим следующий код:

``` js
setInterval(  
"document.getElementById('container').innerHTML += 'My new number: ' + i", 3000  
);  
```

Он не только неэффективен, но еще и работает так же как и `eval`.

Результаты будут такие же. Вместо этого передавайте функцию в качестве аргумента.

``` js
setInterval(someFunction, 3000);    
```

### <a name="8">Используйте { } вместо New Object()</a>
---
Есть несколько путей для создания объектов в JavaScript. Возможно наиболее традиционный это использование конструктора «new», например:

``` js
let o = new Object();  
o.name = 'Jeffrey';  
o.lastName = 'Way';  
o.someFunction = function() {  
   console.log(this.name);  
}  
```

Хотя этот метод получил штамп «плохой практики» он таковой не является. Вместо него, я рекомендую использовать более надежный метод с литералом объекта

``` js
let o = {  
   name: 'Jeffrey',  
   lastName = 'Way',  
   someFunction : function() {  
      console.log(this.name);  
   }  
};  
```

Заметка — если вы хотите создать пустой обьект, то {} сделает это

``` js
let o = {};    
```

::: warning
*Литералы обьектов позволят нам писат код, который поддерживает кучу функционала все еще сохраняя относительную непосредственность. Не нужно больше вызывать конструкторы напрямую или корректировать порядок аргументов переданных в функцию.
— dyn-web.com, http://ww.dyn-web.com/tutorials/obj_lit.php*
:::

### <a name="9">Длинный список переменных? Опустите `let` `const` и используйте запятые</a>
---

``` js
let someItem = 'some string';  
let anotherItem = 'another string';  
let oneMoreItem = 'one more string';   
```

**Лучше**

``` js
let someItem = 'some string',  
    anotherItem = 'another string',  
    oneMoreItem = 'one more string';    
```

Этот код должен говорить сам за себя. Я сомневаюсь что тут есть какие-то подвижки в скорости, но код выглядит чище.

### <a name="10">Всегда, всегда используйте точку с запятой</a>
---
Технически, большинство браузеров позволят вам не использовать их.

``` js
let someItem = 'some string'  
function doSomething() {  
  return 'something'  
}    
```

Но использование подобную практики потенциально может привести к гораздо более большим и что еще хуже плохо отлавливаемым проблемам.

**Лучше**

``` js
let someItem = 'some string';  
function doSomething() {  
  return 'something';  
}     
```
Цитата из  [перевода спецификации ECMA](http://javascript.ru/ecma/part7#a-7.9) ([eng](http://www.ecma-international.org/ecma-262/5.1/#sec-7.9)):

::: warning
*Некоторые инструкции ECMAScript (пустая инструкция, объявление переменной, инструкция-выражение, инструкция **do-while**, инструкция **continue**, инструкция **break**, инструкция **return**, и инструкция **throw**) должны оканчиваться точками с запятыми.

Эти точки с запятыми могут явно указываться в тексте. Однако в некоторых случаях, исходя из соображений удобства, такие точки с запятыми в исходном тексте могут быть опущены. Эти ситуации описываются высказыванием, гласящим, что точки с запятой автоматически вставляются в поток токенов исходного текста в этих ситуациях.*
:::